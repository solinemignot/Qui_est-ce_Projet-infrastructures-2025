<!DOCTYPE html>
<html lang="fr">
<head>
    <title> Choisis ton personnage </title>
    <link rel="stylesheet" type="text/css" href="../static/CSS/stylesheet.css">
</head>
<body class="page_choisir">

    <h1> Choisis ton personnage </h1>
    <p> Clique sur une carte et valide ton choix.</p>

    <div class="grille-choix">
        {%for nom, image in personnages.items() %}
            <div class="carte-choix" onclick="selectPerso('{{ nom }}', this)">
                <img src = "{{ image }}" alt="{{ nom }}">
                <p> {{ nom }} </p>
            </div>
        {% endfor %}
    </div>

    <form method = "POST" action = "/choisir">
        <input type="hidden" name="mon_perso" id="mon_perso">
        <button type="submit" id="btn-choisir" disabled>
            Valider le personnage
        </button>
    </form>

    {% if choix %}
        <div class="confirmation">
            Tu as choisi : <strong>{{ choix }}</strong> 
        </div>
    {% endif %}

    <script>
        function selectPerso(nom, element) {
            document.getElementById('mon_perso').value = nom;  // mettre le nom dans le champ caché du formulaire
            document.querySelectorAll('.carte-choix').forEach(function(carte) { // retirer la classe "selected" de toutes les cartes
                carte.classList.remove('selected');
            });

            element.classList.add('selected'); // ajouter "selected" sur la carte cliquée

            document.getElementById('btn-choisir').disabled = false; // activer le bouton "Valider"
        }
    </script>

</body>
</html>

</body>